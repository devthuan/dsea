import { useEffect, useRef, useState } from "react";
import InFlowOutFlow from "../../components/charts/InFlowOutFlow/InFlowOutFlow";
import SmartContractDataComponent from "../../components/web3/SmartContractDataComponent";
import SmartContractEventsComponent from "../../components/web3/SmartContractEventsComponent";
import useWeb3Contract from "../../hooks/useWeb3Contract";
import contractCandleStrickDay from "../../config/contractCandleStrickDay";
import { convertTimestampToDateString } from "../../util/fotmatDate";
import CandlestickVolume from "../../components/charts/CandlestickVolume/CandlestickVolume";
import LineChartLightWeight from "../../components/charts/LineChartLightWeight/LineChartLightWeight";
import CryptoPieChart from "../../components/charts/CryptPieChart/CryptPieChart";
import PieChartNeedle from "../../components/charts/PieChartNeedle/PieChartNeedle";
import CustomPieChart from "../../components/charts/PieChart/PieChart";
import LineChartReChart2 from "../../components/charts/LineChartReChart2/LineChartReChart2";
import LineChartOI from "../../components/charts/LineChartLightWeight/lineChartOIt";
import FundingRateChart from "../../components/charts/LineChartReChart/FundingRateChart";
import { getContractInstance } from "../../services/smartContractService";
const initDataChartCandle = [
  {
    time: "2018-10-19",
    open: 54.9,
    high: 55.5,
    low: 54.5,
    close: 54.9,
    value: 19103293.0,
  },
  {
    time: "2018-10-22",
    open: 54.98,
    high: 55.2,
    low: 54.8,
    close: 54.98,
    value: 21737523.0,
  },
  {
    time: "2018-10-23",
    open: 57.21,
    high: 57.5,
    low: 56.9,
    close: 57.21,
    value: 29328713.0,
  },
  {
    time: "2018-10-24",
    open: 57.42,
    high: 57.8,
    low: 57.1,
    close: 53.42,
    value: 37435638.0,
  },
  {
    time: "2018-10-25",
    open: 60.43,
    high: 80.8,
    low: 56.2,
    close: 70.43,
    value: 25269995.0,
  },
  {
    time: "2018-10-26",
    open: 55.51,
    high: 56.0,
    low: 55.2,
    close: 55.51,
    value: 24973311.0,
  },
  {
    time: "2018-10-29",
    open: 56.48,
    high: 57.0,
    low: 56.2,
    close: 56.48,
    value: 22103692.0,
  },
  {
    time: "2018-10-30",
    open: 58.18,
    high: 58.5,
    low: 65.8,
    close: 58.18,
    value: 25231199.0,
  },
  {
    time: "2018-10-31",
    open: 57.09,
    high: 57.5,
    low: 56.8,
    close: 57.09,
    value: 24214427.0,
  },
  {
    time: "2018-11-01",
    open: 56.05,
    high: 56.5,
    low: 55.8,
    close: 56.05,
    value: 22533201.0,
  },
  {
    time: "2018-11-02",
    open: 56.63,
    high: 57.0,
    low: 56.3,
    close: 56.63,
    value: 14734412.0,
  },
  {
    time: "2018-11-05",
    open: 57.21,
    high: 57.5,
    low: 56.9,
    close: 57.21,
    value: 12733842.0,
  },
  {
    time: "2018-11-06",
    open: 57.21,
    high: 57.5,
    low: 56.9,
    close: 57.21,
    value: 12371207.0,
  },
  {
    time: "2018-11-07",
    open: 57.65,
    high: 58.0,
    low: 57.3,
    close: 57.65,
    value: 14891287.0,
  },
  {
    time: "2018-11-08",
    open: 58.27,
    high: 58.5,
    low: 57.9,
    close: 58.27,
    value: 12482392.0,
  },
  {
    time: "2018-11-09",
    open: 58.46,
    high: 58.8,
    low: 58.1,
    close: 58.46,
    value: 17365762.0,
  },
  {
    time: "2018-11-12",
    open: 58.72,
    high: 59.0,
    low: 58.4,
    close: 58.72,
    value: 13236769.0,
  },
  {
    time: "2018-11-13",
    open: 58.66,
    high: 59.0,
    low: 58.3,
    close: 58.66,
    value: 13047907.0,
  },
  {
    time: "2018-11-14",
    open: 58.94,
    high: 59.3,
    low: 58.6,
    close: 58.94,
    value: 18288710.0,
  },
  {
    time: "2018-11-15",
    open: 59.08,
    high: 59.4,
    low: 58.7,
    close: 59.08,
    value: 17147123.0,
  },
  {
    time: "2018-11-16",
    open: 60.21,
    high: 60.5,
    low: 59.9,
    close: 60.21,
    value: 19470986.0,
  },
  {
    time: "2018-11-19",
    open: 60.62,
    high: 61.0,
    low: 60.3,
    close: 60.62,
    value: 18405731.0,
  },
  {
    time: "2018-11-20",
    open: 59.46,
    high: 59.8,
    low: 59.1,
    close: 59.46,
    value: 22028957.0,
  },
  {
    time: "2018-11-21",
    open: 59.16,
    high: 59.5,
    low: 58.8,
    close: 59.16,
    value: 18482233.0,
  },
  {
    time: "2018-11-23",
    open: 58.64,
    high: 59.0,
    low: 58.3,
    close: 58.64,
    value: 7009050.0,
  },
  {
    time: "2018-11-26",
    open: 59.17,
    high: 59.5,
    low: 58.8,
    close: 59.17,
    value: 12308876.0,
  },
  {
    time: "2018-11-27",
    open: 60.65,
    high: 61.0,
    low: 60.3,
    close: 60.65,
    value: 14118867.0,
  },
  {
    time: "2018-11-28",
    open: 60.06,
    high: 60.5,
    low: 59.7,
    close: 60.06,
    value: 18662989.0,
  },
  {
    time: "2018-11-29",
    open: 59.45,
    high: 59.8,
    low: 59.1,
    close: 59.45,
    value: 14763658.0,
  },
  {
    time: "2018-11-30",
    open: 60.3,
    high: 60.7,
    low: 59.9,
    close: 60.3,
    value: 31142818.0,
  },
  {
    time: "2018-12-03",
    open: 58.16,
    high: 58.5,
    low: 57.8,
    close: 58.16,
    value: 27795428.0,
  },
  {
    time: "2018-12-04",
    open: 58.09,
    high: 58.5,
    low: 57.7,
    close: 58.09,
    value: 21727411.0,
  },
  {
    time: "2018-12-06",
    open: 58.08,
    high: 58.5,
    low: 57.7,
    close: 58.08,
    value: 26880429.0,
  },
  {
    time: "2018-12-07",
    open: 57.68,
    high: 58.1,
    low: 57.3,
    close: 57.68,
    value: 16948126.0,
  },
  {
    time: "2018-12-10",
    open: 58.27,
    high: 58.7,
    low: 57.9,
    close: 58.27,
    value: 16603356.0,
  },
  {
    time: "2018-12-11",
    open: 58.85,
    high: 59.2,
    low: 58.5,
    close: 58.85,
    value: 14991438.0,
  },
  {
    time: "2018-12-12",
    open: 57.25,
    high: 57.7,
    low: 56.8,
    close: 57.25,
    value: 18892182.0,
  },
  {
    time: "2018-12-13",
    open: 57.09,
    high: 57.5,
    low: 56.7,
    close: 57.09,
    value: 15454706.0,
  },
  {
    time: "2018-12-14",
    open: 57.08,
    high: 57.5,
    low: 56.7,
    close: 57.08,
    value: 13960870.0,
  },
  {
    time: "2018-12-17",
    open: 55.95,
    high: 56.4,
    low: 55.5,
    close: 55.95,
    value: 18902523.0,
  },
  {
    time: "2018-12-18",
    open: 55.65,
    high: 56.1,
    low: 55.2,
    close: 55.65,
    value: 18895777.0,
  },
  {
    time: "2018-12-19",
    open: 55.86,
    high: 56.3,
    low: 55.4,
    close: 55.86,
    value: 20968473.0,
  },
  {
    time: "2018-12-20",
    open: 55.07,
    high: 55.5,
    low: 54.6,
    close: 55.07,
    value: 26897008.0,
  },
  {
    time: "2018-12-21",
    open: 54.92,
    high: 55.3,
    low: 54.5,
    close: 54.92,
    value: 55413082.0,
  },
  {
    time: "2018-12-24",
    open: 53.05,
    high: 53.5,
    low: 52.6,
    close: 53.05,
    value: 15077207.0,
  },
  {
    time: "2018-12-26",
    open: 54.44,
    high: 54.9,
    low: 54.0,
    close: 54.44,
    value: 17970539.0,
  },
  {
    time: "2018-12-27",
    open: 55.15,
    high: 55.6,
    low: 54.7,
    close: 55.15,
    value: 17530977.0,
  },
  {
    time: "2018-12-28",
    open: 55.27,
    high: 55.7,
    low: 54.8,
    close: 55.27,
    value: 14771641.0,
  },
  {
    time: "2018-12-31",
    open: 56.22,
    high: 56.7,
    low: 55.8,
    close: 56.22,
    value: 15331758.0,
  },
  {
    time: "2019-01-02",
    open: 56.02,
    high: 56.5,
    low: 55.6,
    close: 56.02,
    value: 13969691.0,
  },
  {
    time: "2019-01-03",
    open: 56.22,
    high: 56.7,
    low: 55.8,
    close: 56.22,
    value: 19245411.0,
  },
  {
    time: "2019-01-04",
    open: 56.36,
    high: 56.8,
    low: 55.9,
    close: 56.36,
    value: 17035848.0,
  },
  {
    time: "2019-01-07",
    open: 56.72,
    high: 57.2,
    low: 56.3,
    close: 56.72,
    value: 16348982.0,
  },
  {
    time: "2019-01-08",
    open: 58.38,
    high: 58.8,
    low: 57.9,
    close: 58.38,
    value: 21425008.0,
  },
  {
    time: "2019-01-09",
    open: 57.05,
    high: 57.5,
    low: 56.6,
    close: 57.05,
    value: 18136000.0,
  },
  {
    time: "2019-01-10",
    open: 57.6,
    high: 58.0,
    low: 57.2,
    close: 57.6,
    value: 14259910.0,
  },
  {
    time: "2019-01-11",
    open: 58.02,
    high: 58.5,
    low: 57.6,
    close: 58.02,
    value: 15801548.0,
  },
  {
    time: "2019-01-14",
    open: 58.03,
    high: 58.5,
    low: 57.6,
    close: 58.03,
    value: 11342293.0,
  },
  {
    time: "2019-01-15",
    open: 58.1,
    high: 58.5,
    low: 57.7,
    close: 58.1,
    value: 10074386.0,
  },
  {
    time: "2019-01-16",
    open: 57.08,
    high: 57.5,
    low: 56.7,
    close: 57.08,
    value: 13411691.0,
  },
  {
    time: "2019-01-17",
    open: 56.83,
    high: 57.3,
    low: 56.4,
    close: 56.83,
    value: 15223854.0,
  },
  {
    time: "2019-01-18",
    open: 57.09,
    high: 57.5,
    low: 56.7,
    close: 57.09,
    value: 16802516.0,
  },
  {
    time: "2019-01-22",
    open: 56.99,
    high: 57.4,
    low: 56.6,
    close: 56.99,
    value: 18284771.0,
  },
  {
    time: "2019-01-23",
    open: 57.76,
    high: 58.2,
    low: 57.3,
    close: 57.76,
    value: 15109007.0,
  },
  {
    time: "2019-01-24",
    open: 57.07,
    high: 57.5,
    low: 56.7,
    close: 57.07,
    value: 12494109.0,
  },
  {
    time: "2019-01-25",
    open: 56.4,
    high: 56.8,
    low: 56.0,
    close: 56.4,
    value: 17806822.0,
  },
  {
    time: "2019-01-28",
    open: 55.07,
    high: 55.5,
    low: 54.6,
    close: 55.07,
    value: 25955718.0,
  },
  {
    time: "2019-01-29",
    open: 53.28,
    high: 53.7,
    low: 52.9,
    close: 53.28,
    value: 33789235.0,
  },
  {
    time: "2019-01-30",
    open: 54.0,
    high: 54.5,
    low: 53.6,
    close: 54.0,
    value: 27260036.0,
  },
  {
    time: "2019-01-31",
    open: 55.06,
    high: 55.5,
    low: 54.6,
    close: 55.06,
    value: 28585447.0,
  },
  {
    time: "2019-02-01",
    open: 54.55,
    high: 55.0,
    low: 54.1,
    close: 54.55,
    value: 13778392.0,
  },
  {
    time: "2019-02-04",
    open: 54.04,
    high: 54.5,
    low: 53.6,
    close: 54.04,
    value: 15818901.0,
  },
  {
    time: "2019-02-05",
    open: 54.14,
    high: 54.6,
    low: 53.7,
    close: 54.14,
    value: 14124794.0,
  },
  {
    time: "2019-02-06",
    open: 53.79,
    high: 54.2,
    low: 53.4,
    close: 53.79,
    value: 11391442.0,
  },
  {
    time: "2019-02-07",
    open: 53.57,
    high: 54.0,
    low: 53.1,
    close: 53.57,
    value: 12436168.0,
  },
  {
    time: "2019-02-08",
    open: 53.95,
    high: 54.4,
    low: 53.5,
    close: 53.95,
    value: 12011657.0,
  },
  {
    time: "2019-02-11",
    open: 54.05,
    high: 54.5,
    low: 53.6,
    close: 54.05,
    value: 9802798.0,
  },
  {
    time: "2019-02-12",
    open: 54.42,
    high: 54.9,
    low: 54.0,
    close: 54.42,
    value: 11227550.0,
  },
  {
    time: "2019-02-13",
    open: 54.48,
    high: 54.9,
    low: 54.0,
    close: 54.48,
    value: 11884803.0,
  },
  {
    time: "2019-02-14",
    open: 54.03,
    high: 54.5,
    low: 53.6,
    close: 54.03,
    value: 11190094.0,
  },
  {
    time: "2019-02-15",
    open: 55.16,
    high: 55.6,
    low: 54.7,
    close: 55.16,
    value: 15719416.0,
  },
  {
    time: "2019-02-19",
    open: 55.44,
    high: 55.9,
    low: 55.0,
    close: 55.44,
    value: 12272877.0,
  },
  {
    time: "2019-02-20",
    open: 55.76,
    high: 56.2,
    low: 55.3,
    close: 55.76,
    value: 11379006.0,
  },
  {
    time: "2019-02-21",
    open: 56.15,
    high: 56.6,
    low: 55.7,
    close: 56.15,
    value: 14680547.0,
  },
  {
    time: "2019-02-22",
    open: 56.92,
    high: 57.4,
    low: 56.5,
    close: 56.92,
    value: 12534431.0,
  },
  {
    time: "2019-02-25",
    open: 56.78,
    high: 57.2,
    low: 56.3,
    close: 56.78,
    value: 15051182.0,
  },
  {
    time: "2019-02-26",
    open: 56.64,
    high: 57.1,
    low: 56.2,
    close: 56.64,
    value: 12005571.0,
  },
  {
    time: "2019-02-27",
    open: 56.72,
    high: 57.2,
    low: 56.3,
    close: 56.72,
    value: 8962776.0,
  },
  {
    time: "2019-02-28",
    open: 56.92,
    high: 57.4,
    low: 56.5,
    close: 56.92,
    value: 15742971.0,
  },
  {
    time: "2019-03-01",
    open: 56.96,
    high: 57.4,
    low: 56.5,
    close: 56.96,
    value: 10942737.0,
  },
  {
    time: "2019-03-04",
    open: 56.24,
    high: 56.7,
    low: 55.8,
    close: 56.24,
    value: 13674737.0,
  },
  {
    time: "2019-03-05",
    open: 56.08,
    high: 56.5,
    low: 55.6,
    close: 56.08,
    value: 15749545.0,
  },
  {
    time: "2019-03-06",
    open: 55.68,
    high: 56.1,
    low: 55.2,
    close: 55.68,
    value: 13935530.0,
  },
  {
    time: "2019-03-07",
    open: 56.3,
    high: 56.7,
    low: 55.9,
    close: 56.3,
    value: 12644171.0,
  },
  {
    time: "2019-03-08",
    open: 56.53,
    high: 57.0,
    low: 56.1,
    close: 56.53,
    value: 10646710.0,
  },
  {
    time: "2019-03-11",
    open: 57.58,
    high: 58.0,
    low: 57.1,
    close: 57.58,
    value: 13627431.0,
  },
  {
    time: "2019-03-12",
    open: 57.43,
    high: 57.9,
    low: 57.0,
    close: 57.43,
    value: 12812980.0,
  },
  {
    time: "2019-03-13",
    open: 57.66,
    high: 58.1,
    low: 57.2,
    close: 57.66,
    value: 14168350.0,
  },
  {
    time: "2019-03-14",
    open: 57.95,
    high: 58.4,
    low: 57.5,
    close: 57.95,
    value: 12148349.0,
  },
  {
    time: "2019-03-15",
    open: 58.39,
    high: 58.8,
    low: 57.9,
    close: 58.39,
    value: 23715337.0,
  },
  {
    time: "2019-03-18",
    open: 58.07,
    high: 58.5,
    low: 57.6,
    close: 58.07,
    value: 12168133.0,
  },
  {
    time: "2019-03-19",
    open: 57.5,
    high: 57.9,
    low: 57.1,
    close: 57.5,
    value: 13462686.0,
  },
  {
    time: "2019-03-20",
    open: 57.67,
    high: 58.1,
    low: 57.2,
    close: 57.67,
    value: 11903104.0,
  },
  {
    time: "2019-03-21",
    open: 58.29,
    high: 58.7,
    low: 57.9,
    close: 58.29,
    value: 10920129.0,
  },
  {
    time: "2019-03-22",
    open: 59.76,
    high: 60.2,
    low: 59.3,
    close: 59.76,
    value: 25125385.0,
  },
  {
    time: "2019-03-25",
    open: 60.08,
    high: 60.5,
    low: 59.6,
    close: 60.08,
    value: 15463411.0,
  },
  {
    time: "2019-03-26",
    open: 60.63,
    high: 61.0,
    low: 60.2,
    close: 60.63,
    value: 12316901.0,
  },
  {
    time: "2019-03-27",
    open: 60.88,
    high: 61.3,
    low: 60.4,
    close: 60.88,
    value: 13290298.0,
  },
  {
    time: "2019-03-28",
    open: 59.08,
    high: 59.5,
    low: 58.6,
    close: 59.08,
    value: 20547060.0,
  },
  {
    time: "2019-03-29",
    open: 59.13,
    high: 59.5,
    low: 58.7,
    close: 59.13,
    value: 17283871.0,
  },
  {
    time: "2019-04-01",
    open: 59.09,
    high: 59.5,
    low: 58.7,
    close: 59.09,
    value: 16331140.0,
  },
  {
    time: "2019-04-02",
    open: 58.53,
    high: 59.0,
    low: 58.1,
    close: 58.53,
    value: 11408146.0,
  },
  {
    time: "2019-04-03",
    open: 58.87,
    high: 59.3,
    low: 58.4,
    close: 58.87,
    value: 15491724.0,
  },
  {
    time: "2019-04-04",
    open: 58.99,
    high: 59.4,
    low: 58.5,
    close: 58.99,
    value: 8776028.0,
  },
  {
    time: "2019-04-05",
    open: 59.09,
    high: 59.5,
    low: 58.7,
    close: 59.09,
    value: 11497780.0,
  },
  {
    time: "2019-04-08",
    open: 59.13,
    high: 59.5,
    low: 58.7,
    close: 59.13,
    value: 11680538.0,
  },
  {
    time: "2019-04-09",
    open: 58.4,
    high: 58.8,
    low: 58.0,
    close: 58.4,
    value: 10414416.0,
  },
  {
    time: "2019-04-10",
    open: 58.61,
    high: 59.0,
    low: 58.2,
    close: 58.61,
    value: 8782061.0,
  },
  {
    time: "2019-04-11",
    open: 58.56,
    high: 59.0,
    low: 58.1,
    close: 58.56,
    value: 9219930.0,
  },
  {
    time: "2019-04-12",
    open: 58.74,
    high: 59.2,
    low: 58.3,
    close: 58.74,
    value: 10847504.0,
  },
  {
    time: "2019-04-15",
    open: 58.71,
    high: 59.1,
    low: 58.3,
    close: 58.71,
    value: 7741472.0,
  },
  {
    time: "2019-04-16",
    open: 58.79,
    high: 59.2,
    low: 58.4,
    close: 58.79,
    value: 10239261.0,
  },
  {
    time: "2019-04-17",
    open: 57.78,
    high: 58.2,
    low: 57.3,
    close: 57.78,
    value: 15498037.0,
  },
  {
    time: "2019-04-18",
    open: 58.04,
    high: 58.5,
    low: 57.6,
    close: 58.04,
    value: 13189013.0,
  },
  {
    time: "2019-04-22",
    open: 58.37,
    high: 58.8,
    low: 57.9,
    close: 58.37,
    value: 11950365.0,
  },
  {
    time: "2019-04-23",
    open: 57.15,
    high: 57.6,
    low: 56.7,
    close: 57.15,
    value: 23488682.0,
  },
  {
    time: "2019-04-24",
    open: 57.08,
    high: 57.5,
    low: 56.7,
    close: 57.08,
    value: 13227084.0,
  },
  {
    time: "2019-04-25",
    open: 55.85,
    high: 56.3,
    low: 55.4,
    close: 55.85,
    value: 17425466.0,
  },
  {
    time: "2019-04-26",
    open: 56.58,
    high: 57.0,
    low: 56.1,
    close: 56.58,
    value: 16329727.0,
  },
  {
    time: "2019-04-29",
    open: 56.84,
    high: 57.3,
    low: 56.4,
    close: 56.84,
    value: 13984965.0,
  },
  {
    time: "2019-04-30",
    open: 57.19,
    high: 57.6,
    low: 56.7,
    close: 57.19,
    value: 15469002.0,
  },
  {
    time: "2019-05-01",
    open: 56.52,
    high: 57.0,
    low: 56.0,
    close: 56.52,
    value: 11627436.0,
  },
  {
    time: "2019-05-02",
    open: 56.99,
    high: 57.5,
    low: 56.5,
    close: 56.99,
    value: 14435436.0,
  },
  {
    time: "2019-05-03",
    open: 57.24,
    high: 57.7,
    low: 56.8,
    close: 57.24,
    value: 9388228.0,
  },
  {
    time: "2019-05-06",
    open: 56.91,
    high: 57.4,
    low: 56.5,
    close: 56.91,
    value: 10066145.0,
  },
  {
    time: "2019-05-07",
    open: 56.63,
    high: 57.1,
    low: 56.2,
    close: 56.63,
    value: 12963827.0,
  },
  {
    time: "2019-05-08",
    open: 56.38,
    high: 56.8,
    low: 55.9,
    close: 56.38,
    value: 12086743.0,
  },
  {
    time: "2019-05-09",
    open: 56.48,
    high: 56.9,
    low: 56.0,
    close: 56.48,
    value: 14835326.0,
  },
  {
    time: "2019-05-10",
    open: 56.91,
    high: 57.4,
    low: 56.5,
    close: 56.91,
    value: 10707335.0,
  },
  {
    time: "2019-05-13",
    open: 56.75,
    high: 57.2,
    low: 56.3,
    close: 56.75,
    value: 13759350.0,
  },
  {
    time: "2019-05-14",
    open: 56.55,
    high: 57.0,
    low: 56.1,
    close: 56.55,
    value: 12776175.0,
  },
  {
    time: "2019-05-15",
    open: 56.81,
    high: 57.3,
    low: 56.4,
    close: 56.81,
    value: 10806379.0,
  },
  {
    time: "2019-05-16",
    open: 57.38,
    high: 57.8,
    low: 56.9,
    close: 57.38,
    value: 11695064.0,
  },
  {
    time: "2019-05-17",
    open: 58.09,
    high: 58.5,
    low: 57.6,
    close: 58.09,
    value: 14436662.0,
  },
  {
    time: "2019-05-20",
    open: 59.01,
    high: 59.5,
    low: 58.5,
    close: 59.01,
    value: 20910590.0,
  },
  {
    time: "2019-05-21",
    open: 59.5,
    high: 60.0,
    low: 59.0,
    close: 59.5,
    value: 14016315.0,
  },
  {
    time: "2019-05-22",
    open: 59.25,
    high: 59.7,
    low: 58.8,
    close: 59.25,
    value: 11487448.0,
  },
  {
    time: "2019-05-23",
    open: 58.87,
    high: 59.3,
    low: 58.4,
    close: 58.87,
    value: 11707083.0,
  },
  {
    time: "2019-05-24",
    open: 59.32,
    high: 59.8,
    low: 58.9,
    close: 59.32,
    value: 8755506.0,
  },
  {
    time: "2019-05-28",
    open: 59.57,
    high: 60.0,
    low: 59.1,
    close: 59.57,
    value: 3097125.0,
  },
];

const tradePoints = [
  { time: "2018-10-25", price: 60, type: "buy" },
  { time: "2018-10-26", price: 55, type: "sell" },
];

const Test = () => {
  const { web3, contract, listenToEvent, fetchData } = useWeb3Contract({
    contractAddress: contractCandleStrickDay.address,
    contractAbi: contractCandleStrickDay.abi,
  });

  const [dataCandle, setDataCandle] = useState(initDataChartCandle);

  const updateDataChart = (newData) => {
    setDataCandle((prevData) => {
      // Tìm kiếm xem ngày có tồn tại trong dữ liệu trước đó không
      const existingIndex = prevData.findIndex(
        (item) => item.time === newData.time
      );

      // Nếu ngày đã tồn tại, ghi đè dữ liệu
      if (existingIndex !== -1) {
        const updatedData = [...prevData];
        updatedData[existingIndex] = {
          ...newData, // Ghi đè hoàn toàn dữ liệu cũ bằng dữ liệu mới
        };
        return updatedData;
      } else {
        // Nếu ngày mới, thêm vào cuối danh sách
        const lastBalance =
          prevData.length > 0 ? prevData[prevData.length - 1].balance : 0;
        return [
          ...prevData,
          {
            time: newData.time,
            inflow: newData.inflow,
            outflow: newData.outflow,
            balance: lastBalance + (newData.inflow - newData.outflow),
          },
        ];
      }
    });
  };

  const [candlesticks, setCandlesticks] = useState([]); // Lưu trữ mảng nến
  const socketRef = useRef(null);
  const lastCandleRef = useRef(null);

  // useEffect(() => {
  //   if (contract) {
  //     listenToEvent("Recorded", (event) => {
  //       // console.log("event listening:", event.returnValues.formData);
  //       const result = event.returnValues.formData;
  //       const timeStamp = Number(result.timestamp);

  //       const dataFormat = {
  //         time: convertTimestampToDateString(timeStamp, "YYYY-MM-DD"),
  //         open: parseFloat(result.open),
  //         high: parseFloat(result.high),
  //         low: parseFloat(result.low),
  //         close: parseFloat(result.close),
  //         value: parseFloat(result.volume),
  //       };
  //       console.log(dataFormat)
  //       updateDataChart(dataFormat);
  //     });
  //   }
  // }, [contract]);
console.log(  getContractInstance("ContractNetFLowDay"))

  return (
    <div
      className={"w-full h-full  bg-white/60 rounded-[32px] p-[32px] shadow-lg"}
    >
      {/* <CandlestickVolume /> */}
      {/* <LineChartLightWeight /> */}
      {/* <PieChartNeedle /> */}
      {/* <CustomPieChart/> */}
      {/* <LineChartOI /> */}
      <FundingRateChart />
    </div>
  );
};

export default Test;
